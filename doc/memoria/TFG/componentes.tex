%chapter introduce un nuevo capítulo
\chapter{Elección de componentes}

Como punto de partida, se han seleccionado una serie de componentes adecuados para dotar al robot con las capacidades necesarias para cumplir los objetivos.

\section{Plataforma robótica}

El primer paso para la realización de este proyecto fue el estudio y selección de las plataformas robóticas que pueden conseguirse actualmente. Dado que el objetivo es encontrar un robot humanoide sobre el que se pueda implantar un sistema de visión, es necesario analizar diversos aspectos; algunos mecánicos como el numero y fuerza de los actuadores, y otros electrónicos como la capacidad de procesamiento y velocidad del controlador. Sin embargo, dado que este proyecto es autofinanciado en su mayor medida, el factor económico también es un limitante destacable. 

En el siguiente apartado se presenta un estudio las principales principales opciones.

\subsection{Selección de una plataforma robótica}

En el mercado existe una gran variedad de robots educativos que cumplen las características antropomórficas necesarias para ser considerados robots mini-humanoides. Los robots que se muestran a continuación son una recopilación de algunos de los modelos mas accesibles y extendidos.

\subsubsection{Hitec Robonova}

El Robonova (figura \ref{robonova}) es uno de los mini-humanoides mas extendidos a nivel mundial. Fue uno de los primeros robots de este tipo que se fabricó comercialmente y marcó un antes y un despues en su categoría. Es por esto que es muy común encontrar Robonovas en competiciones como Ceabot, ya que durante muchos años fue el robot mini-humanoide mejor equipado y mas vendido. En la Asociación de Robótica de la Universidad Carlos III, se han utilizado Robonovas en competiciones y proyectos desde su fundación.

\begin{figure}[h]
\centering
\includegraphics[width=0.4\textwidth]{figuras/robonova}   
\caption{Hitec Robonova}
\label{robonova}
\end{figure}

El kit de fábrica cuenta con 16 grados de libertad. Sus actuadores son servos digitales HSR 8498HB, que desarrollan un torque de 7.4kg/cm. Cabe destacar de estor servos su función "Motion Feedback", es decir, su capacidad para leer posiciones y comunicarselas al controlador.
La placa de control del Robonova está basada en un microcontrolador ATMega 128 y cuenta con hasta 40 pines GPIO (puertos binarios de entrada y salida), 8 entradas analógicas, 3 salidas PWM, puerto serie y conexión I2C. Gracias a esto, el Robonova es fácilmente ampliable con sensores y actuadores, no necesariamente de la misma marca. En cuanto al software, Hitec da soporte a la programación con RoboBasic, un entorno de desarrollo completo con un lenguaje basado en Basic. 

\subsubsection{Kondo KHR-3HV}

El KHR-3HV (figura \ref{kondo}), del fabricante japonés Kondo, es uno de los mini-humanoides mas avanzados actualmente. Puede presumir de ser el modelo de serie mas utilizado en el campeonato Robo-One, siendo seleccionado por los equipos por su gran agilidad y tamaño compacto.

\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{figuras/kondo}   
\caption{Kondo KHR-3HV}
\label{kondo}
\end{figure}

En su configuración standard, el KHR-3HV cuenta con 17 servomotores KRS-2552HV de 14kg/cm de torque. Dichos actuadores, además, incluyen un pequeño microcontrolador, lo que les permite conectarse en daisy chain. El robot incluye una controladora RCB-4, expandible con 10 entradas analogicas y 10 GPIOs, y con capacidad para controlar hasta 35 servos. El software de programación ofrecido por Kondo es el Heart to Heart V4, que puede ser descargado gratuitamente desde su web oficial. Es importante recalcar que gracias a su inmensa comunidad de usuarios, existen varios proyectos de código abierto con librerías que permiten programar el KHR-3HV en lenguajes mas convencionales, como C y Python.


\subsubsection{Vstone Robovie-X}

El Robovie-X, uno de los robots humanoides de la empresa Vstone, se presenta en tres versiones diferentes: Lite, Standard y PRO. La diferencia entre los tres modelos radica en el número y tipo de servos que montan, manteniendo comunes el resto de partes del robot. El modelo Standard (figura \ref{robovie}) posee 17 grados de libertad, movidos por servos VS-S092J que desarrollan un torque de 9.2kg/cm. El controlador es un VS-C1, el cual tiene 30 canales para controlar servos. Vstone también fabrica diversas placas de expansión para la conexión de sensores en el Robovie-X.

\begin{figure}[h]
\centering
\includegraphics[width=0.5\textwidth]{figuras/robovie.jpg}
\caption{Vstone Robovie-X}
\label{robovie}
\end{figure}

Junto al robot se suministra el programa RobovieMaker2, necesario para programarlo. El método de programación está orientado a la construcción de diagramas de flujo desde los que se controlan tanto los movimientos como la lectura de sensores externos.


\subsubsection{Robotis Bioloid}

La empresa koreana Robotis, comercializa un kit robótico conocido como Bioloid. Este kit proporciona una amplia gama de piezas diferentes para montar distintos modelos de robots. La modularidad de los componentes le convierten en una base excelente sobre la que realizar modificaciones, pudiendo diseñar configuraciones alternativas con gran facilidad.

El robot Bioloid (figura \ref{bioloid}) incluye 18 servos Dynamixel, modelo AX-12A o AX-18A, dependiendo de la versión del kit. Los actuadores Dynamixel están controlados internamente por un microcontrolador ATMega8. Gracias a él, estos servos permiten realizar funciones avanzadas tales como el control de velocidad, torque, temperatura de ejecución... etc, posibilitando procesar información de bajo nivel directamente dentro del actuador y pudiendo abstraer el control de la controladora del robot a un nivel superior.

En cuanto a su controladora, los kits proporcionan controladoras de Robotis de la serie CM, mas específicamente, la CM-5 en el caso del Bioloid Comprehensive y la CM-510 o CM-530 (según qué versión) en el Bioloid Premium y GP.


\begin{figure}[h]
\centering
\includegraphics[width=0.4\textwidth]{figuras/bioloid.JPG}   
\caption{Bioloid Premium}
\label{bioloid}
\end{figure}


\begin{itemize}
\item \textbf{Robotis CM-5}.

Cuenta con un microcontrolador ATMega128. Permite la conexión de sensores específicos de la marca en el bus TTL, como el Dynamixel AX-S1.
\item \textbf{Robotis CM-510}.

Basada en un microcontrolador  ATMega2561. Además de los sensores de la propia marca (Dynamixel AX-S1, giróscopo...), que pueden montarse conectados al bus TTL, tiene cinco puertos para la conexión de sensores de salida analógica. Adicionalmente, posee un puerto para conectar un receptor ZigBee y teleoperar el robot.
\item \textbf{Robotis CM-530}.
 
Presentado como la evolución de la CM-510, en este caso el microcontrolador de la placa es un ARM Cortex STM32F103RE, de 32 bits. El resto de características son similares a las de la CM-510, tiene cinco puertos de expasión para sensores analógicos y un puerto para conectar un receptor ZigBee o Bluetooth.
\end{itemize}

En cuanto a la programación, Roboplus ( TODO foto ) es una suite de programas distribuida gratuitamente por Robotis para la programación de sus robots educativos. Destaca por ser un entorno con un lenguaje de programación (R+) muy visual e intuitivo, preparado para su uso por niños o gente sin conocimientos muy avanzados de programación. Sin embargo, esto lo convierte en un lenguaje de programación muy limitado, hasta el punto que no permite utilizar todo el potencial de los actuadores Dynamixel.



\subsubsection{comparativa y elección final}

\section{Modificaciones básicas}

\subsection{Alimentación}

batería mas ubec de ¿3A?

\subsection{Cabeza móvil}


\section{Elección del controlador}
%mixto
\subsection{Controlador de locomoción}
\subsubsection{Arbotix}
\subsubsection{Serie OpenCM}
\subsection{Controlador de visión}
\subsubsection{BeagleBone Black}
\subsubsection{Raspberry Pi}
\subsubsection{Comparativa y selección}
\section{Sensorización}
%Estudio de diferentes sensores
\subsection{Sensores de distancia}
\subsubsection{Infrarrojos}
\subsubsection{Ultrasonidos}
\subsection{Sensor inercial}

El control del equilibrio del robot es muy importante en configuraciones bípedas, ya que estos robots son conocidos por su facilidad para tropezar y caer al suelo. Con el objetivo de analizar la posición del robot respecto al suelo se ha requerido la inclusión de un sensor inercial.

% TODO cambiar por foto real
\begin{figure}[H]
\centering
\includegraphics[width=0.8\textwidth]{figuras/imu}   
\caption{Sensor inercial MPU9150}
\label{imu}
\end{figure}

En el mercado existen varios modelos económicos. En este proyecto se ha utilizado un sensor MPU9150 (figura \ref{imu}), que es un sensor inercial compuesto de acelerómetro de 3 ejes, giroscopio de 3 ejes y brújula de 3 ejes. Este sensor combina dos sensores, un MPU6050 (incluye el acelerometro y el giroscopio) y un AK8975 (incluye la brújula).

\subsection{Brújula}

TODO está por ver si meto la anisotropica o la normal

\subsection{Cámara}

La elección de la cámara ha sido condicionada principalmente por su compatibilidad con el driver de Linux v4l2. Existe una amplia variedad de cámaras válidas en el mercado. Dado el carácter de este proyecto, se ha optado por utilizar una webcam, ya que son mas accesibles que las cámaras avanzadas de investigación y los algoritmos de visión que serán programados no requieren imágenes de alta calidad.

\begin{figure}[H]
\centering
\includegraphics[width=0.8\textwidth]{figuras/camara}   
\caption{Microsoft LifeCam Cinema}
\label{camara}
\end{figure}

El modelo selecionado ha sido una Microsoft LifeCam Cinema (figura \ref{camara}). Entre sus carácterísticas destacan su posibilidad de grabar video en 720p y el ajuste automático de brillos en tiempo real.

Cabe remarcar que antes de utilizar esta cámara se realizaron pruebas con una Hama Pocket, pero dada su baja calidad de construcción presentó diversos problemas de fiabilidad y fue despreciada en favor de la Microsoft. 


\subsection{Configuración final}



\paragraph{Palabras clave:} palabraclave1, palabraclave2, palabraclave3.
